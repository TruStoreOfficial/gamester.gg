<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamester.gg | Auto-Library</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Keeping the same sleek CSS from before */
        :root { --bg-dark: #0f1015; --bg-card: #1c1e26; --primary: #7c3aed; --text-main: #f3f4f6; --border: #2d303b; }
        body { background: var(--bg-dark); color: var(--text-main); font-family: 'Poppins', sans-serif; padding: 20px; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .game-card { background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden; transition: 0.3s; cursor: pointer; text-decoration: none; color: inherit; }
        .game-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .game-icon { width: 100%; aspect-ratio: 1/1; object-fit: cover; background: #2a2d39; }
        .game-info { padding: 12px; text-align: center; }
        .game-title { font-weight: 600; font-size: 0.9rem; text-transform: capitalize; }
        .loader { text-align: center; font-size: 1.2rem; margin-top: 50px; color: var(--primary); }
    </style>
</head>
<body>

    <header>
        <h1 style="font-size: 1.5rem;">ðŸŽ® Gamester<span>.gg</span></h1>
        <div id="status">Scanning /offline folder...</div>
    </header>

    <div id="loader" class="loader">Fetching your games...</div>
    <div class="game-grid" id="gameGrid"></div>

    <script>
        // --- CONFIGURATION ---
        const REPO_OWNER = "TruStoreOfficial";
        const REPO_NAME = "gamester.gg";
        const FOLDER_PATH = "offline"; // The folder to scan

        async function fetchGames() {
            const grid = document.getElementById('gameGrid');
            const loader = document.getElementById('loader');
            const status = document.getElementById('status');

            try {
                // Hits the GitHub API to get the contents of the /offline folder
                const response = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${FOLDER_PATH}`);
                const items = await response.json();

                loader.style.display = 'none';

                // Filter to only include directories (folders)
                const folders = items.filter(item => item.type === 'dir');
                
                status.innerText = `${folders.length} Games Found`;

                folders.forEach(folder => {
                    const gameName = folder.name.replace(/-/g, ' '); // Cleans up "subway-surfers" to "subway surfers"
                    const gameUrl = `./${FOLDER_PATH}/${folder.name}/index.html`;
                    
                    // Logic: assumes you have a 'thumbnail.png' or 'icon.png' inside each folder
                    // If not found, it falls back to a placeholder
                    const imageUrl = `./${FOLDER_PATH}/${folder.name}/icon.png`;

                    const card = document.createElement('a');
                    card.href = gameUrl;
                    card.className = 'game-card';
                    card.innerHTML = `
                        <img src="${imageUrl}" class="game-icon" onerror="this.src='https://placehold.co/200x200/1c1e26/7c3aed?text=No+Icon'">
                        <div class="game-info">
                            <div class="game-title">${gameName}</div>
                        </div>
                    `;
                    grid.appendChild(card);
                });

            } catch (error) {
                console.error("Error fetching games:", error);
                loader.innerText = "Failed to load games. Check console.";
            }
        }

        fetchGames();
    </script>
</body>
</html>
